# PWA Setup Documentation

## Overview
Το Academy Manager app έχει ρυθμιστεί ως Progressive Web App (PWA), επιτρέποντας στους χρήστες να το εγκαταστήσουν στην αρχική οθόνη των κινητών τους και να το χρησιμοποιούν σαν native εφαρμογή.

## Features

### ✅ Installable
- Το app μπορεί να προστεθεί στην αρχική οθόνη μέσω του "Add to Home Screen" prompt
- Εμφανίζεται με custom icon και splash screen
- Ανοίγει σε standalone mode χωρίς browser UI

### ✅ Offline-Ready
- Caching strategy με Workbox για offline functionality
- Firebase Storage images: Cache-First (30 days)
- Firestore data: Network-First (5 min cache, 10s timeout)
- Static assets precached κατά την εγκατάσταση

### ✅ App-Like Experience
- Standalone display mode (no browser chrome)
- Portrait-primary orientation
- Blue theme color (#3b82f6)
- App shortcuts για γρήγορη πρόσβαση σε Dashboard/Teams/Players

## Architecture

### Manifest (`vite.config.js`)
```javascript
manifest: {
  name: 'Academy Manager',
  short_name: 'Academy',
  description: 'Σύστημα διαχείρισης αθλητικής ακαδημίας',
  theme_color: '#3b82f6',
  icons: [...],
  shortcuts: [...]
}
```

### Service Worker (Workbox)
Αυτόματη δημιουργία με vite-plugin-pwa:
- **CacheFirst**: Firebase Storage images (50 entries, 30 days)
- **NetworkFirst**: Firestore data (10s timeout, 5 min cache)
- **Precaching**: Static assets (HTML, CSS, JS, icons)

### Icons
8 PNG icons σε διαφορετικά μεγέθη:
- 72x72, 96x96, 128, 144, 152, 192, 384, 512
- Purpose: "any maskable" για compatibility σε όλες τις συσκευές
- Design: Blue background με "A" letter (placeholder)

## Testing

### Development
```bash
npm run dev
```
⚠️ Service Worker δεν λειτουργεί σε dev mode (HMR incompatibility)

### Production Build
```bash
npm run build
npm run preview
```
Ανοίξτε σε mobile browser και δοκιμάστε "Add to Home Screen"

### Verification Checklist
- [ ] Manifest εμφανίζεται στα Chrome DevTools (Application > Manifest)
- [ ] Service Worker registered (Application > Service Workers)
- [ ] Icons φορτώνουν σωστά (Application > Manifest > Icons)
- [ ] Install prompt εμφανίζεται σε mobile
- [ ] App ανοίγει σε standalone mode
- [ ] Offline functionality λειτουργεί

## Files Structure

```
public/
├── icons/
│   ├── icon-72x72.png
│   ├── icon-96x96.png
│   └── ... (all sizes)
└── manifest.json (backup, generated by Vite)

dist/ (after build)
├── manifest.webmanifest
├── sw.js
├── workbox-*.js
└── registerSW.js
```

## Scripts

### Create SVG Icons
```bash
.\create-icons.ps1
```
Δημιουργεί placeholder SVG icons

### Convert to PNG
```bash
node convert-icons.cjs
```
Μετατρέπει SVG σε PNG με sharp library

### Build PWA
```bash
npm run build
```
Vite automatically generates service worker and manifest

## Future Improvements

### Design Custom Icons
Αντικατάστησε τα placeholder icons με professional design:
1. Design στα 512x512px (Figma/Photoshop)
2. Export σε όλα τα required sizes
3. Αντικατάστησε τα αρχεία στο `public/icons/`

### Push Notifications
Προσθήκη Firebase Cloud Messaging για notifications:
```javascript
// Future feature
messaging.requestPermission()
messaging.onMessage()
```

### Background Sync
Sync operations όταν το app επανασυνδεθεί:
```javascript
// Future feature
navigator.serviceWorker.ready.then(reg => {
  reg.sync.register('sync-tag')
})
```

### Offline Form Submission
Queue forms locally όταν offline:
```javascript
// Future feature using IndexedDB
```

## Troubleshooting

### "Add to Home Screen" δεν εμφανίζεται
- Έλεγξε ότι το app τρέχει σε HTTPS (ή localhost)
- Έλεγξε το manifest στα DevTools
- Έλεγξε τα console errors
- Δοκίμασε σε mobile device (not desktop)

### Service Worker δεν ενημερώνεται
- Hard refresh (Ctrl+Shift+R)
- Unregister old service worker στα DevTools
- Clear cache and rebuild

### Icons δεν εμφανίζονται
- Έλεγξε το path στο manifest (πρέπει να είναι absolute: `/icons/...`)
- Έλεγξε ότι τα PNG files υπάρχουν στο `public/icons/`
- Rebuild το app

## Resources

- [PWA Documentation](https://web.dev/progressive-web-apps/)
- [Vite PWA Plugin](https://vite-pwa-org.netlify.app/)
- [Workbox Documentation](https://developer.chrome.com/docs/workbox/)
- [Web App Manifest Spec](https://www.w3.org/TR/appmanifest/)

---

**Last Updated**: 2024-01-XX  
**Version**: 1.0.0
